(function(){"use strict";angular.module("soccercomparisonApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch"]).config(["$routeProvider",function(a){return a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl",reloadOnSearch:!1}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl"}).otherwise({redirectTo:"/"})}])}).call(this),function(){"use strict";angular.module("soccercomparisonApp").controller("MainCtrl",["$scope",function(a){return a.showModal=function(){return $("#info-modal").modal("show")}}])}.call(this),function(){"use strict";angular.module("soccercomparisonApp").controller("AboutCtrl",["$scope",function(a){return a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}])}.call(this),function(){"use strict";var a=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};angular.module("soccercomparisonApp").directive("viz",function(){return{restrict:"E",link:function(b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r;return d=1200,h={Male:["#FFF","#008"],Female:["#FFF","#700"]},j={top:20,left:20,bottom:20,right:20},m=.8,i=angular.element(document).height()*m-j.top-j.bottom,n=angular.element(document).width()*m-j.left-j.right,e=d3.select(c[0]).append("svg").attr("id","chart-container").attr("height",i+j.top+j.bottom).attr("width",n+j.right+j.left).append("g").attr("id","chart"),r=d3.scale.linear().range([i,0]),q=d3.svg.axis().scale(r).orient("right").tickSize(n),p=d3.scale.ordinal().rangeRoundBands([0,n],.1),o=d3.svg.axis().scale(p).orient("bottom"),g="<div id=\"color-legend\" class=\"legend\">\n  <div id='male-legend'>\n    <div id='male-box'></div>\n    <h5 id='male-text'>Men's Team Players</h5>\n  </div>\n  <div id='female-legend'>\n    <div id='female-box'></div>\n    <h5 id='female-text'>Women's Team Players</h5>\n  </div>",f=d3.tip().attr("class","d3-tip").html(g).direction("sw").offset([j.top,n-j.right]),l=function(){return'<div id="player-legend" class="legend">\n    <h2>Hover over a player to view stats.</h2>\n</div>'},k=d3.tip().attr("class","d3-tip").html(l).direction("sw").offset([j.top,(n-j.right)/1.5]),d3.json("data/goalscorers.json",function(c){var f,g,j,k,l,m,s,t,u,v,w,x,y,z;b.data=c,j=c.map(function(a){var b;return function(){b=[];for(var c=1,d=parseInt(a.Goals);d>=1?d>=c:c>=d;d>=1?c++:c--)b.push(c);return b}.apply(this)}),x=d3.max(b.data,function(a){return+a.Goals}),y=d3.min(b.data,function(a){return+a.Goals}),r.domain([0,x+30]),p.domain(b.data.map(function(a){return a.Player})),w=e.append("g").attr("class","y axis").call(q),f=3,l=5,u=e.append("g").attr("class","x axis").attr("transform","translate(0, "+i+")").call(o).selectAll("text").style("text-anchor","start").attr("y","-10").attr("x",p.rangeBand()/2),g=d3.scale.linear().domain([y,x]).range(colorbrewer.Reds[3]),m=d3.scale.linear().domain([y,x]).range(colorbrewer.Blues[3]),s=e.selectAll(".ranges").data(b.data).enter().append("g").attr("id",function(a,b){return"group-"+b}).attr("class",function(a){return"Male"===a.Gender?"ranges Male":"ranges Female"}).on("mouseenter",function(a,c){var d,e;return d=b.data[c],e="<h3>"+d.Player+" scored "+d.Goals+" goals in "+d.caps+" games.</h3>\n<div class='youtube'>\n  <iframe width='360' height='204' src='http://www.youtube.com/embed/"+d.Vid+"?rel=0&amp;vq=small&amp;modestbranding=1' frameborder='0'></iframe>\n</div>",-1===d3.select("#player-legend").html().search(d.Vid)?(d3.select("#player-legend").html(e),d3.select(".youtube").transition().duration(1800).ease("cubic").style("opacity","1"),d3.select("#name-legend").text(b.data[c].Player),d3.select("#goals-legend").text("Goals: "+b.data[c].Goals)):void 0}).append("rect").attr("x",function(a){return p(a.Player)}).attr("y",function(a){return r(+a.Goals+f)}).attr("width",p.rangeBand()).attr("height",0).transition().duration(d).ease("bounce").attr("height",function(a){return i-r(+a.Goals+f)}).style("fill",function(a){return"Female"===a.Gender?g(2.5*+a.Goals+80):"Male"===a.Gender?m(6*+a.Goals+140):void 0}).style("stroke",function(a){return"Female"===a.Gender?g(2.5*+a.Goals+80):m(6*+a.Goals+140)}),d3.selectAll("g.x.axis .tick").attr("id",function(a){return a}).attr("transform",function(a,b){var c,d,e;return c=d3.select("g#group-"+b+" rect"),c.empty()?void 0:(d=c.attr("x"),e=i-+c.attr("y"),"translate("+d+", -"+e+") rotate(-30)")}),d3.selectAll("g.y.axis .tick").attr("id",function(a){return"goal-"+a}),k=d3.selectAll("g.ranges").data(j).selectAll("circle").data(function(a){return a}).enter().append("circle").attr("r","2.3").attr("cx",function(){var a,b,c,d,e;return e=d3.select(this.parentNode).select("rect"),c={left:18,right:18},a=+e.attr("x")+p.rangeBand()-c.right,b=+e.attr("x")+c.left,d=Math.random()*(a-b)+b}).attr("cy",function(a){return r(a)}).classed("goal",!0).style("opacity",0).transition().delay(function(a,b){return d+b*(b/10)}).style("opacity",1).style("fill",function(){var a,b;return b=d3.select(this.parentNode).classed("Male")?"Male":"Female",a=h[b],a[Math.floor(2*Math.random())]}),z=d3.behavior.zoom().scaleExtent([1,10]).on("zoom",function(){e.attr("transform","translate("+d3.event.translate+") scale("+d3.event.scale+")")}),d3.select("#chart-container").call(z),d3.selectAll(".y.axis .tick:nth-child(18) line, .y.axis .tick:nth-child(18) text").attr("style","opacity: 0.3; stroke-width:1px;").transition().delay(6e3).duration(2e3).attr("style","opacity: 0.8; stroke-width: 2px;").transition().duration(4e3).attr("style","opacity: 0.3; stroke-width: 1px;"),t=e.append("line").attr("id","scrubBar").attr({x1:Math.ceil(.1*p.rangeBand()*2+2),y1:-1,x2:Math.ceil(n-(.1*p.rangeBand()*2-2)),y2:-1}),v=e.append("text").attr("id","xAxisNum").attr({x:n-70,y:-1}),e.on("mousemove",function(){var b,c,d;return d=d3.mouse(this)[1],b=Math.floor(r.invert(d)),d3.select("#scrubBar").attr({y1:d-2,y2:d-2}),d3.select("#xAxisNum").attr({y:d-20}).text(""+b+" goals"),c=[167,158,130,105,100,74,60,57,53,50,46,39,34,30,24,23,21,19,17],a.call(c,b)>=0?d3.select("#scrubBar").attr("style","stroke-width: 2px;"):d3.select("#scrubBar").attr("style","")}),d3.select("#male-legend").on("mouseenter",function(){return d3.selectAll("g.ranges.Male rect").classed("legend-hover",!0)}).on("mouseleave",function(){return d3.selectAll("g.ranges.Male rect").classed("legend-hover",!1)}),d3.select("#female-legend").on("mouseenter",function(){return d3.selectAll("g.ranges.Female rect").classed("legend-hover",!0)}).on("mouseleave",function(){return d3.selectAll("g.ranges.Female rect").classed("legend-hover",!1)})}),b.$on("$viewContentLoaded",function(){return e.call(f),e.call(k),f.show("data",e.node()),k.show("data",e.node())})}}})}.call(this);